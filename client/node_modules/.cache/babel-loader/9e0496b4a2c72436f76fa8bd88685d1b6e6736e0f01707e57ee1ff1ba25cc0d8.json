{"ast":null,"code":"import React,{useState,useEffect}from'react';import{VideoGenerationForm}from'./VideoGenerationForm';import{VideoQueue}from'./VideoQueue';import{Analytics}from'./Analytics';import{Settings}from'./Settings';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Dashboard=_ref=>{let{user}=_ref;const[activeTab,setActiveTab]=useState('generate');const[videos,setVideos]=useState([]);const[loading,setLoading]=useState(false);const handleVideoGeneration=async(prompt,imageUrl,options)=>{setLoading(true);try{const response=await fetch('/api/videos/generate',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${localStorage.getItem('token')}`},body:JSON.stringify({prompt,imageUrl,title:prompt.substring(0,50),...options})});if(!response.ok)throw new Error('Generation failed');const result=await response.json();setVideos(prev=>[...prev,result.data.video]);}catch(error){console.error('Generation error:',error);// Handle error appropriately\n}finally{setLoading(false);}};const fetchVideos=async()=>{try{const response=await fetch('/api/videos',{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const result=await response.json();setVideos(result.data.videos);}}catch(error){console.error('Failed to fetch videos:',error);}};useEffect(()=>{fetchVideos();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"AI Reels Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Welcome back, \",user.firstName||user.username,\"!\"]})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8 px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${activeTab==='generate'?'bg-blue-100 text-blue-700':'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`,onClick:()=>setActiveTab('generate'),children:\"Generate\"}),/*#__PURE__*/_jsxs(\"button\",{className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${activeTab==='queue'?'bg-blue-100 text-blue-700':'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`,onClick:()=>setActiveTab('queue'),children:[\"Queue (\",videos.filter(v=>v.status==='PENDING'||v.status==='GENERATING').length,\")\"]}),/*#__PURE__*/_jsx(\"button\",{className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${activeTab==='analytics'?'bg-blue-100 text-blue-700':'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`,onClick:()=>setActiveTab('analytics'),children:\"Analytics\"}),/*#__PURE__*/_jsx(\"button\",{className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${activeTab==='settings'?'bg-blue-100 text-blue-700':'text-gray-500 hover:text-gray-700 hover:bg-gray-100'}`,onClick:()=>setActiveTab('settings'),children:\"Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[activeTab==='generate'&&/*#__PURE__*/_jsx(VideoGenerationForm,{onGenerate:handleVideoGeneration,loading:loading}),activeTab==='queue'&&/*#__PURE__*/_jsx(VideoQueue,{videos:videos,onRefresh:fetchVideos}),activeTab==='analytics'&&/*#__PURE__*/_jsx(Analytics,{userId:user.id}),activeTab==='settings'&&/*#__PURE__*/_jsx(Settings,{userId:user.id})]})]})})});};","map":{"version":3,"names":["React","useState","useEffect","VideoGenerationForm","VideoQueue","Analytics","Settings","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","user","activeTab","setActiveTab","videos","setVideos","loading","setLoading","handleVideoGeneration","prompt","imageUrl","options","response","fetch","method","headers","localStorage","getItem","body","JSON","stringify","title","substring","ok","Error","result","json","prev","data","video","error","console","fetchVideos","className","children","firstName","username","onClick","filter","v","status","length","onGenerate","onRefresh","userId","id"],"sources":["/Users/jochengyssels/Documents/Reels Generator/ai-reels/client/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { VideoGenerationForm } from './VideoGenerationForm';\nimport { VideoQueue } from './VideoQueue';\nimport { Analytics } from './Analytics';\nimport { Settings } from './Settings';\nimport { User, Video } from '../types';\n\ninterface DashboardProps {\n  user: User;\n}\n\nexport const Dashboard: React.FC<DashboardProps> = ({ user }) => {\n  const [activeTab, setActiveTab] = useState<'generate' | 'queue' | 'analytics' | 'settings'>('generate');\n  const [videos, setVideos] = useState<Video[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const handleVideoGeneration = async (prompt: string, imageUrl: string, options?: any) => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/videos/generate', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({ \n          prompt, \n          imageUrl, \n          title: prompt.substring(0, 50),\n          ...options \n        }),\n      });\n\n      if (!response.ok) throw new Error('Generation failed');\n      \n      const result = await response.json();\n      setVideos(prev => [...prev, result.data.video]);\n    } catch (error) {\n      console.error('Generation error:', error);\n      // Handle error appropriately\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchVideos = async () => {\n    try {\n      const response = await fetch('/api/videos', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.ok) {\n        const result = await response.json();\n        setVideos(result.data.videos);\n      }\n    } catch (error) {\n      console.error('Failed to fetch videos:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchVideos();\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-white rounded-lg shadow\">\n          {/* Header */}\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">AI Reels Dashboard</h1>\n            <p className=\"text-gray-600\">Welcome back, {user.firstName || user.username}!</p>\n          </div>\n\n          {/* Navigation */}\n          <nav className=\"flex space-x-8 px-6 py-4 border-b border-gray-200\">\n            <button \n              className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                activeTab === 'generate' \n                  ? 'bg-blue-100 text-blue-700' \n                  : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\n              }`}\n              onClick={() => setActiveTab('generate')}\n            >\n              Generate\n            </button>\n            <button \n              className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                activeTab === 'queue' \n                  ? 'bg-blue-100 text-blue-700' \n                  : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\n              }`}\n              onClick={() => setActiveTab('queue')}\n            >\n              Queue ({videos.filter(v => v.status === 'PENDING' || v.status === 'GENERATING').length})\n            </button>\n            <button \n              className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                activeTab === 'analytics' \n                  ? 'bg-blue-100 text-blue-700' \n                  : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\n              }`}\n              onClick={() => setActiveTab('analytics')}\n            >\n              Analytics\n            </button>\n            <button \n              className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                activeTab === 'settings' \n                  ? 'bg-blue-100 text-blue-700' \n                  : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\n              }`}\n              onClick={() => setActiveTab('settings')}\n            >\n              Settings\n            </button>\n          </nav>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {activeTab === 'generate' && (\n              <VideoGenerationForm\n                onGenerate={handleVideoGeneration}\n                loading={loading}\n              />\n            )}\n            {activeTab === 'queue' && (\n              <VideoQueue \n                videos={videos} \n                onRefresh={fetchVideos}\n              />\n            )}\n            {activeTab === 'analytics' && (\n              <Analytics userId={user.id} />\n            )}\n            {activeTab === 'settings' && (\n              <Settings userId={user.id} />\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}